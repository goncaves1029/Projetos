<!-- index.html -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Carrinho de Compras Simples</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Loja de Festas</h1>
  <div class="produtos">
    <div class="produto" data-id="1" data-nome="Cadeira Infantil" data-preco="25">
      <img src="cadeira.png" alt="Cadeira Infantil">
      <h2>Cadeira Infantil</h2>
      <p>R$ 25,00</p>
      <button class="adicionar">Adicionar</button>
    </div>
    <div class="produto" data-id="2" data-nome="Mesa Redonda" data-preco="60">
      <img src="mesa.png" alt="Mesa Redonda">
      <h2>Mesa Redonda</h2>
      <p>R$ 60,00</p>
      <button class="adicionar">Adicionar</button>
    </div>
    <div class="produto" data-id="3" data-nome="Piscina de Bolinhas" data-preco="120">
      <img src="piscina.png" alt="Piscina de Bolinhas">
      <h2>Piscina de Bolinhas</h2>
      <p>R$ 120,00</p>
      <button class="adicionar">Adicionar</button>
    </div>
    <!-- Adicione mais produtos conforme necessário -->
  </div>

  <!-- Ícone fixo do carrinho -->
  <div id="carrinho-icone" tabindex="0" aria-label="Abrir carrinho" role="button">
    <span class="carrinho-svg">&#128722;</span>
    <span id="contador-carrinho" class="badge">0</span>
  </div>

  <!-- Modal/Painel do carrinho -->
  <div id="carrinho-modal" class="modal" aria-modal="true" role="dialog" aria-labelledby="titulo-carrinho" aria-describedby="descricao-carrinho" tabindex="-1">
    <div class="modal-conteudo">
      <header>
        <h2 id="titulo-carrinho">Seu Carrinho</h2>
        <button id="fechar-carrinho" aria-label="Fechar carrinho">&times;</button>
      </header>
      <div id="descricao-carrinho" class="descricao">Itens adicionados:</div>
      <ul id="lista-carrinho"></ul>
      <div class="acoes-carrinho">
        <button id="limpar-carrinho">Limpar Carrinho</button>
      </div>
    </div>
    <div class="modal-overlay"></div>
  </div>

  <!-- Toast de feedback -->
  <div id="toast" class="toast" aria-live="polite"></div>

  <script src="script.js"></script>
</body>

<style>
    /* style.css */

/* Reset e fonte */
body {
  font-family: 'Segoe UI', Arial, sans-serif;
  margin: 0;
  padding: 0;
  background: #f7f7f7;
}

h1 {
  text-align: center;
  margin-top: 24px;
}

.produtos {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 32px;
  margin: 32px 0;
}

.produto {
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.07);
  padding: 16px;
  width: 220px;
  text-align: center;
  transition: box-shadow 0.2s;
}

.produto:hover {
  box-shadow: 0 4px 16px rgba(0,0,0,0.12);
}

.produto img {
  width: 80px;
  height: 80px;
  object-fit: contain;
  margin-bottom: 8px;
}

.adicionar {
  background: #4CAF50;
  color: #fff;
  border: none;
  border-radius: 20px;
  padding: 8px 20px;
  cursor: pointer;
  font-size: 1rem;
  margin-top: 8px;
  transition: background 0.2s;
}

.adicionar:focus, .adicionar:hover {
  background: #388E3C;
  outline: none;
}

/* Ícone fixo do carrinho */
#carrinho-icone {
  position: fixed;
  top: 24px;
  right: 24px;
  z-index: 1000;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(0,0,0,0.12);
  width: 56px;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  outline: none;
  transition: box-shadow 0.2s;
}

#carrinho-icone:focus, #carrinho-icone:hover {
  box-shadow: 0 4px 16px rgba(0,0,0,0.18);
}

.carrinho-svg {
  font-size: 2rem;
  color: #333;
}

.badge {
  position: absolute;
  top: 8px;
  right: 8px;
  background: #E53935;
  color: #fff;
  border-radius: 50%;
  padding: 2px 8px;
  font-size: 0.9rem;
  font-weight: bold;
  min-width: 20px;
  text-align: center;
  transition: transform 0.2s;
  pointer-events: none;
}

.badge.animar {
  animation: badge-pulse 0.4s;
}

@keyframes badge-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}

/* Modal do carrinho */
.modal {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  z-index: 2000;
  align-items: center;
  justify-content: center;
}

.modal.ativo {
  display: flex;
}

.modal-overlay {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.35);
  z-index: 1;
}

.modal-conteudo {
  position: relative;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.18);
  padding: 24px 32px;
  min-width: 320px;
  max-width: 90vw;
  z-index: 2;
  animation: modal-slide-in 0.35s;
}

@keyframes modal-slide-in {
  from { transform: translateY(-40px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.modal-conteudo header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#fechar-carrinho {
  background: none;
  border: none;
  font-size: 2rem;
  color: #E53935;
  cursor: pointer;
  transition: color 0.2s;
}

#fechar-carrinho:focus, #fechar-carrinho:hover {
  color: #B71C1C;
  outline: none;
}

#lista-carrinho {
  list-style: none;
  padding: 0;
  margin: 16px 0 0 0;
  max-height: 260px;
  overflow-y: auto;
}

#lista-carrinho li {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid #eee;
}

#lista-carrinho .nome {
  font-weight: 500;
}

#lista-carrinho .quantidade {
  margin: 0 12px;
  font-size: 1rem;
}

#lista-carrinho .remover {
  background: none;
  border: none;
  color: #E53935;
  font-size: 1.2rem;
  cursor: pointer;
  margin-left: 8px;
  transition: color 0.2s;
}

#lista-carrinho .remover:focus, #lista-carrinho .remover:hover {
  color: #B71C1C;
  outline: none;
}

.acoes-carrinho {
  display: flex;
  justify-content: flex-end;
  margin-top: 16px;
}

#limpar-carrinho {
  background: #E53935;
  color: #fff;
  border: none;
  border-radius: 20px;
  padding: 8px 20px;
  cursor: pointer;
  font-size: 1rem;
  transition: background 0.2s;
}

#limpar-carrinho:focus, #limpar-carrinho:hover {
  background: #B71C1C;
  outline: none;
}

/* Toast de feedback */
.toast {
  position: fixed;
  bottom: 32px;
  left: 50%;
  transform: translateX(-50%);
  background: #323232;
  color: #fff;
  padding: 12px 32px;
  border-radius: 24px;
  font-size: 1rem;
  opacity: 0;
  pointer-events: none;
  z-index: 3000;
  transition: opacity 0.3s;
}

.toast.ativo {
  opacity: 1;
}

/* Responsividade */
@media (max-width: 600px) {
  .produtos {
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }
  .produto {
    width: 90vw;
    max-width: 320px;
  }
  .modal-conteudo {
    padding: 16px 8px;
    min-width: 90vw;
  }
  #carrinho-icone {
    top: 12px;
    right: 12px;
    width: 44px;
    height: 44px;
  }
}
</style>

<script>
    // script.js

// Carrinho: array de objetos {id, nome, preco, quantidade}
let carrinho = [];

// Seletores principais
const produtos = document.querySelectorAll('.produto');
const btnsAdicionar = document.querySelectorAll('.adicionar');
const carrinhoIcone = document.getElementById('carrinho-icone');
const contadorCarrinho = document.getElementById('contador-carrinho');
const carrinhoModal = document.getElementById('carrinho-modal');
const listaCarrinho = document.getElementById('lista-carrinho');
const fecharCarrinho = document.getElementById('fechar-carrinho');
const limparCarrinho = document.getElementById('limpar-carrinho');
const toast = document.getElementById('toast');
const modalOverlay = document.querySelector('.modal-overlay');

// Carrega carrinho do localStorage ao iniciar
function carregarCarrinho() {
  const salvo = localStorage.getItem('carrinho');
  carrinho = salvo ? JSON.parse(salvo) : [];
  atualizarContador();
}
carregarCarrinho();

// Salva carrinho no localStorage
function salvarCarrinho() {
  localStorage.setItem('carrinho', JSON.stringify(carrinho));
}

// Atualiza contador do ícone do carrinho
function atualizarContador() {
  const total = carrinho.reduce((acc, item) => acc + item.quantidade, 0);
  contadorCarrinho.textContent = total;
  // Anima badge ao adicionar
  contadorCarrinho.classList.add('animar');
  setTimeout(() => contadorCarrinho.classList.remove('animar'), 350);
}

// Exibe toast de feedback
function mostrarToast(msg) {
  toast.textContent = msg;
  toast.classList.add('ativo');
  setTimeout(() => toast.classList.remove('ativo'), 1200);
}

// Adiciona item ao carrinho
function adicionarAoCarrinho(id, nome, preco) {
  const existente = carrinho.find(item => item.id === id);
  if (existente) {
    existente.quantidade += 1;
  } else {
    carrinho.push({ id, nome, preco, quantidade: 1 });
  }
  salvarCarrinho();
  atualizarContador();
  mostrarToast(`"${nome}" adicionado ao carrinho!`);
  renderizarCarrinho();
}

// Remove item do carrinho
function removerDoCarrinho(id) {
  carrinho = carrinho.filter(item => item.id !== id);
  salvarCarrinho();
  atualizarContador();
  renderizarCarrinho();
}

// Limpa todo o carrinho
function limparCarrinhoFunc() {
  carrinho = [];
  salvarCarrinho();
  atualizarContador();
  renderizarCarrinho();
}

// Renderiza conteúdo do carrinho no modal
function renderizarCarrinho() {
  listaCarrinho.innerHTML = '';
  if (carrinho.length === 0) {
    listaCarrinho.innerHTML = '<li>Seu carrinho está vazio.</li>';
    return;
  }
  carrinho.forEach(item => {
    const li = document.createElement('li');
    li.innerHTML = `
      <span class="nome">${item.nome}</span>
      <span class="quantidade">x${item.quantidade}</span>
      <button class="remover" aria-label="Remover ${item.nome}" title="Remover">&times;</button>
    `;
    li.querySelector('.remover').addEventListener('click', () => removerDoCarrinho(item.id));
    listaCarrinho.appendChild(li);
  });
}

// Abre modal do carrinho
function abrirCarrinho() {
  carrinhoModal.classList.add('ativo');
  renderizarCarrinho();
  // Foco no modal para acessibilidade
  carrinhoModal.focus();
}

// Fecha modal do carrinho
function fecharCarrinhoFunc() {
  carrinhoModal.classList.remove('ativo');
  // Retorna foco ao ícone do carrinho
  carrinhoIcone.focus();
}

// Eventos dos botões "Adicionar"
btnsAdicionar.forEach((btn, idx) => {
  btn.addEventListener('click', () => {
    const produto = produtos[idx];
    const id = produto.dataset.id;
    const nome = produto.dataset.nome;
    const preco = Number(produto.dataset.preco);
    adicionarAoCarrinho(id, nome, preco);
  });
});

// Evento do ícone do carrinho (mouse e teclado)
carrinhoIcone.addEventListener('click', abrirCarrinho);
carrinhoIcone.addEventListener('keydown', e => {
  if (e.key === 'Enter' || e.key === ' ') abrirCarrinho();
});

// Eventos do modal
fecharCarrinho.addEventListener('click', fecharCarrinhoFunc);
modalOverlay.addEventListener('click', fecharCarrinhoFunc);
limparCarrinho.addEventListener('click', limparCarrinhoFunc);

// Acessibilidade: fecha modal com ESC
carrinhoModal.addEventListener('keydown', e => {
  if (e.key === 'Escape') fecharCarrinhoFunc();
  // Focus trap: Tab/Shift+Tab cicla dentro do modal
  const focusables = carrinhoModal.querySelectorAll('button, [tabindex]:not([tabindex="-1"])');
  if (e.key === 'Tab') {
    const first = focusables[0];
    const last = focusables[focusables.length - 1];
    if (e.shiftKey && document.activeElement === first) {
      e.preventDefault();
      last.focus();
    } else if (!e.shiftKey && document.activeElement === last) {
      e.preventDefault();
      first.focus();
    }
  }
});

// Inicializa renderização do carrinho
renderizarCarrinho();
</script>
</html>